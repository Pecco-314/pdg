**PDG**（Pecco's Data Generator）是一个用于为OJ生成测试数据的工具，只要编写模板文件，就可以自动地生成数据。

# 开始使用
新建一个文本文件，不妨设文件名为`template.txt`，包含内容：
```
i[-1e9,1e9] i[-1e9,1e9]
```
然后，在命令行中进入该文件所在目录，执行以下命令（需要将pdg加入环境变量）：
```
pdg template.txt
```
可以发现在该目录下生成了`testdata`文件夹，其中包含从`1.in`到`10.in`十个测试文件，均包含两个从-10^9到10^9之间的整数。

如果你不熟悉命令行的操作，可以选择把`pdg.exe`复制到模板文件所在的文件夹，然后双击运行（这时文件名必须是`template.txt`）或者把模板文件拖到`pdg.exe`上运行。

# 语法

## 生成器
除固定值外，格式一般为`标志符[参数1, 参数2, ...]`，在不至于导致二义性的情况下方括号可以省略，省略方括号时参数间不能有空格。参数的类型有：
- `Int`：64位有符号整数，可以是浮点形式，但必须能无损转换，如`1e5`
- `Size`：，机器指针长度范围内的无符号整数，也可以是浮点形式，但必须能无损转换
- `Char`：字符，用单引号括起来的任意字符
- `Str`：字符串，用双引号括起来的任意字符串，可以使用转义字符`\"`、`\\`、`\n`、`\r`、`\t`
- `Enum`：枚举，未用引号括起的单词，对于每种生成器来说可用的枚举是固定的，常常用来限定生成器生成的范围
- `Bool`：布尔值，为true或false，可看作特殊的枚举

### 固定值
| 格式    | 示例     | 作用                            |
| ------- | -------- | ------------------------------- |
| `x:Int` | `100`    | 生成固定整数x                   |
| `s:Str` | `"Test"` | 生成固定字符串s，其中可使用转义 |
| `/`     | `/`      | 生成换行符                      |

### 整数
| 格式             | 示例          | 作用                  |
| ---------------- | ------------- | --------------------- |
| `i[r:Int]`       | `i[100]`      | 生成[0,r]间的随机整数 |
| `i[l:Int,r:Int]` | `i[-100,100]` | 生成[l,r]间的随机整数 |


### 字符串
| 格式                                | 示例                      | 作用                                                 |
| ----------------------------------- | ------------------------- | ---------------------------------------------------- |
| `s[l:Size]`                         | `s[20]`                   | 生成长度为l的随机小写字母字符串                      |
| `s[lower,l:Size]`                   | `s[lower,20]`             | 生成长度为l的随机小写字母字符串                      |
| `s[upper,l:Size]`                   | `s[upper,20]`             | 生成长度为l的随机大写字母字符串                      |
| `s[alpha,l:Size]`                   | `s[alpha,20]`             | 生成长度为l的随机拉丁字母字符串                      |
| `s[bin,l:Size]`                     | `s[bin,20]`               | 生成长度为l的随机01串                                |
| `s[oct,l:Size]`                     | `s[oct,20]`               | 生成长度为l的随机八进制数字串                        |
| `s[dec,l:Size]`                     | `s[dec,20]`               | 生成长度为l的随机十进制数字串                        |
| `s[hexlower,l:Size]`                | `s[hexlower,20]`          | 生成长度为l的随机十六进制数字串，其中a-f用小写       |
| `s[hexupper,l:Size]`                | `s[hexupper,20]`          | 生成长度为l的随机十六进制数字串，其中A-F用大写       |
| `s[alnum,l:Size]`                   | `s[alnum,20]`             | 生成长度为l的随机数字或拉丁字母字符串                |
| `s[graph,l:Size]`                   | `s[graph,20]`             | 生成长度为l的（ASCII内）数字、字母或标点符号字符串   |
| `s[oneof,s:Str,l:Size]`             | `s[oneof,"!?",20]`        | 生成长度为l、字符在s中出现过的随机字符串             |
| `s[between,bg:Char,ed:Char,l:Size]` | `s[between,'你','我',20]` | 生成长度为l、字符的Unicode码在bg到ed之间的随机字符串 |


### 重复
| 格式              | 示例             | 作用                                      |
| ----------------- | ---------------- | ----------------------------------------- |
| `X[n:Size] {...}` | `A[20] {i1e5 /}` | 把...重复生成n次                          |
| `A[n:Size] {...}` | `T[20] {i1e5 /}` | 数组。先生成n和换行，然后把...重复生成t次 |

这里的...可以是一个或多个生成器，如果只有一个，那么大括号可以省略。每次重复会独立地生成随机数。


## 生成器做参数
| 格式 | 示例      | 作用                                                |
| ---- | --------- | --------------------------------------------------- |
| `!G` | `s[!100]` | 用G的生成结果作为参数，需要类型相符（编译期确定值） |
| `?G` | `s[?100]` | 用G的生成结果作为参数，需要类型相符（运行期确定值） |

注意两者的区别，`!G`的值在编译模板时便确定下来，成为模板的一部分；`?G`的值则在生成时才确定。一般来说，`?G`会更常用。

## 操作符
### 大小关系限定符
| 格式     | 示例                   | 作用                                         |
| -------- | ---------------------- | -------------------------------------------- |
| `G1<G2`  | `i[10,20] < i[15,25]`  | G1和G2分别生成，但保证第一个数小于第二个数   |
| `G1>G2`  | `i[10,20] > i[15,25]`  | G1和G2分别生成，但保证第一个数大于第二个数   |
| `G1<=G2` | `i[10,20] <= i[15,25]` | G1和G2分别生成，但保证第一个数不大于第二个数 |
| `G1>=G2` | `i[10,20] >= i[15,25]` | G1和G2分别生成，但保证第一个数不小于第二个数 |

这里的G1和G2目前只支持整数生成器。

## 文件标注
限定接下来（直到下一个文件标注前）的内容生成到哪个文件。如果没有文件标注，则会默认生成到`1.in`到·。每个数的随机数会独立地产生。

| 格式                | 示例       | 作用                         |
| ------------------- | ---------- | ---------------------------- |
| `:> f:Size`         | `:> 1`     | 以下内容生成到`f.in`         |
| `:> l:Size..r:Size` | `:> 1..20` | 以下内容生成到`l.in`到`r.in` |

## 配置
在模板文件开头，可以写配置，它们以`#`开头，并带有一些参数

| 格式             | 示例              | 作用                                             |
| ---------------- | ----------------- | ------------------------------------------------ |
| `#folder[f:Str]` | `#folder["data"]` | 输出到f文件夹                                    |
| `#pause[b:Bool]` | `#pause[true]`    | 控制程序结束后是否暂停                           |
| `#prefix[p:Str]` | `#prefix["test"]` | 给得到的测试文件名添加前缀                       |
| `#std[e:Str]`    | `#std["std.exe"]` | 执行可执行文件e，为每个.in文件生成对应的.out文件 |

要使用`#std`，需要安装Powershell。